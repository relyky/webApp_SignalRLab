
@{
    ViewBag.Title = "Monitor";
    Layout = "~/Views/Shared/_NgLayoutPage1.cshtml";
}

@section javascripts {
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    @Scripts.Render("~/bundles/monitor")
}

@* BODY-CONTENT *@
<div class="container" ng-controller="mainCtrl" ng-init="init()" ng-cloak>

    <h2>@ViewBag.Title</h2>
    <p>監視器；應用：KPI狀態監控</p>
    <p>AngularJS v1.6.4 + Bootstrap v3.3.7</p>

    @*<button class="btn btn-default" ng-click="addNotifyMessage('danger','你危險了！')">add Notify Message</button>*@
    <button class="btn btn-primary" ng-click="startMonitorHub()">Start Hub</button>
    <button class="btn btn-warning" ng-click="stopMonitorHub()">Stop Hub</button>
    <button class="btn btn-primary" ng-click="enableMonitorHub()">Enable Monitor</button>
    <button class="btn btn-warning" ng-click="disableMonitorHub()">Disable Monitor</button>
    <button class="btn btn-default" ng-click="resetDataList()">Clear</button>

    <div class="row">
        <div class="col-md-8 col-sm-12" style="background-color:whitesmoke;">
            <h3>資訊面板 <span class="label label-default">{{dataList.length}}</span></h3>

            <div class="alert alert-success alert-dismissable">
                <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
                <strong>Success!</strong> This alert box could indicate a successful or positive action.
            </div>

            <div ng-repeat="c in dataList" class="alert alert-{{c.notifyType}} alert-dismissable">
                <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
                <strong>{{c.notifyType}}</strong> {{c.notifyMsg}}
            </div>

        </div>
        <div class="col-md-4 col-sm-12" style="background-color:lavenderblush;">
            <h3>SignalR 連線狀態</h3>
            <table class="table table-striped">
                @*<thead>
                    <tr>
                        <th>Name</th>
                        <th>Value</th>
                    </tr>
                </thead>*@
                <tbody>
                    <tr>
                        <td>連線狀態</td>
                        <td>{{hobConnState}}</td>
                    </tr>
                    <tr>
                        <td>連線ID</td>
                        <td>{{hobConnId}}</td>
                    </tr>
                    <tr>
                        <td>Monitor State</td>
                        <td>{{hobMonitorState}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>

